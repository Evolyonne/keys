<div class="container">

  <section class="section-title">
    <h1><%= @bien.nom %></h1>
  </section>

  <section class="section-head mb-4">
    <div class="section-card section-add-loyer">
      <p class="section-text-loyer">Avez-vous re√ßu le loyer de <%= @bien.montant_loyer %> de la part de <%= @bien.locataires.first.prenom %> <%= @bien.locataires.first.nom %> ?</p>
      <%= link_to "J'ai re√ßu le loyer üí∞", bien_loyers_path(bien_id: @bien.id), method: :post, class:"btn btn-gradient" %>
    </div>

    <div class="section-card section-add-depense">
      <!-- ADD DEPENSE -->
      <p class="section-text-depense">Ajouter une d√©pense</p>
      <div class="form-container">
        <%= form_for @bien do |f| %>
          <%= f.simple_fields_for :depenses, @bien.depenses.build do |ff| %>
            <%= ff.hidden_field :id %>
            <div class="d-flex justify-content-between">
              <%= ff.input :nom, label: false, placeholder: "Nom", input_html: {class: "form-input"} %>
              <%= ff.input :montant, label: false, placeholder: "Montant", input_html: {class: "form-input"} %>
              <%= ff.input :categorie, label: false, collection: Depense::CATEGORIE, prompt: "-- S√©lectionnez une cat√©gorie --", input_html: {class: "form-input"}  %>
            </div>
            <%= ff.input :date_paiement, label: false, as: :date, order: [:day, :month, :year], input_html: {class: "form-input"} %>
          <% end %>

          <%= f.submit "Enregistrer", class: "btn btn-gradient" %>
        <% end %>
      </div>
    </div>
  </section>


<!-- TABLEAU  SYNTHESE -->
<div class="responsive-table">
  <table class="tableau-synthese">
    <thead>
      <tr>
        <th> Ann√©e en cours </th>
        <th>Encaiss√©</th>
        <th>A venir</th>
      </tr>
    <thead>
    <tbody>
      <tr>
        <td>Loyers</td>
        <td><%= @loyers_received %>‚Ç¨</td>
        <td><%=  %>0‚Ç¨ </td>
      </tr>
      <tr>
        <td>Taxe Fonci√®re</td>
        <td><%= @taxe_fonciere_paid %>‚Ç¨</td>
        <td><%= @taxe_fonciere_tbp %>‚Ç¨</td>
      </tr>
      <tr>
        <td>Copropri√©t√©</td>
        <td><%= @copropriete_paid %>‚Ç¨</p></td>
        <td><%= @copropriete_tbp %>‚Ç¨</td>
      </tr>
      <tr>
        <td>Assurances</p></td>
        <td><%= @assurances_paid %>‚Ç¨</td>
        <td><%= @assurances_tbp %>‚Ç¨</td>
      </tr>
      <tr>
        <td>Travaux</p></td>
        <td><%= @travaux_paid %>‚Ç¨</td>
        <td><%= @travaux_tbp %>‚Ç¨</td>
      </tr>
      <tr>
        <td>Autres</p></td>
        <td><%= @autres_paid %>‚Ç¨</td>
        <td><%= @autres_tbp %>‚Ç¨</td>
      </tr>
    </tbody>
  </table>
</div>


  <!-- TABLEAU OPERATIONS -->


  <div class="tableau_depenses container mb-4">
    <h2>Derni√®res transactions </h2>
    <ul class="responsive-table">
      <li class="table-header">
        <div class="col col-1">Date</div>
        <div class="col col-2">Categorie</div>
        <div class="col col-3">Libell√©</div>
        <div class="col col-4">Montant</div>
      </li>

    <% @lasts_transactions.first(5).each do |transaction| %>
      <li class="table-row">
        <div class="col col-1" data-label="Date"><%= transaction['date_paiement'].strftime('%d/%m/%Y') %></div>
        <div class="col col-2" data-label="Categorie"><%= transaction['categorie'] || 'Loyer' %> </div>
        <div class="col col-3" data-label="Libell√©"> <%= transaction['nom'] || 'Encaiss√©' %></div>
        <div class="col col-4" data-label="Montant"><b><%= transaction['montant'] %> ‚Ç¨</b></div>
      </li>
    <% end %>
  </div>


</div>




<!-- <h2>Suivi financier</h2>
<h3>Recettes</h3>
<p>Loyers collect√©s: <%= @loyers_received %>‚Ç¨ re√ßus / <%=  %>‚Ç¨ √† venir</p>

<h3>D√©penses</h3>
<p>Cr√©dit: <%= @credits_paid %>‚Ç¨ pay√©s / <%= @credits_tbp %>‚Ç¨ √† payer</p>
<p>Taxe Fonci√®re: <%= @taxe_fonciere_paid %>‚Ç¨ pay√©s / <%= @taxe_fonciere_tbp %>‚Ç¨ √† payer</p>
<p>Copropri√©t√©: <%= @copropriete_paid %>‚Ç¨ pay√©s / <%= @copropriete_tbp %>‚Ç¨ √† payer</p>
<p>Assurances: <%= @assurances_paid %>‚Ç¨ pay√©s / <%= @assurances_tbp %>‚Ç¨ √† payer</p>
<p>Travaux: <%= @travaux_paid %>‚Ç¨ pay√©s / <%= @travaux_tbp %>‚Ç¨ √† payer</p>
<p>Autres: <%= @autres_paid %>‚Ç¨ pay√©s / <%= @autres_tbp %>‚Ç¨ √† payer</p>


<p>Autres</p> -->
